<Page x:Class="LeasingCompanyMS.Pages.BrowseCarsPage.BrowseCarsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:browseCarsPage="clr-namespace:LeasingCompanyMS.Pages.BrowseCarsPage"
      mc:Ignorable="d"
      d:DesignHeight="450" d:DesignWidth="800"
      Title="BrowseCarsPage"
      HorizontalAlignment="Stretch"
      VerticalAlignment="Stretch">

	<Page.DataContext>
		<browseCarsPage:BrowseCarsPageViewModel />
	</Page.DataContext>

	<StackPanel>
		<ComboBox ItemsSource="{Binding Cars}"
		          SelectedItem="{Binding SelectedCar}" />

		<Image HorizontalAlignment="Left" />

		<Border Margin="0,16,0,0">
			<StackPanel>
				<!-- Make -->
				<Border Margin="0,4,0,0" />
				<StackPanel Orientation="Horizontal">
					<Label Content="Make:" Foreground="White" />
					<Label Content="{Binding SelectedCar.Mark}" Foreground="White" />
				</StackPanel>

				<!-- Model -->
				<Border Margin="0,4,0,0" />
				<StackPanel Orientation="Horizontal">
					<Label Content="Model:" Foreground="White" />
					<Label Content="{Binding SelectedCar.Model}" Foreground="White" />
				</StackPanel>

				<!-- Year of production -->
				<Border Margin="0,4,0,0">
					<StackPanel Orientation="Horizontal">
						<Label Content="Year of production:" Foreground="White" />
						<Label Content="{Binding SelectedCar.Year}" Foreground="White" />
					</StackPanel>
				</Border>

				<!-- Registration number -->
				<Border Margin="0,4,0,0">
					<StackPanel Orientation="Horizontal">
						<Label Content="Registration number:" Foreground="White" />
						<Label Content="{Binding SelectedCar.Registration}" Foreground="White" />
					</StackPanel>
				</Border>

				<!-- VIN -->
				<Border Margin="0,8,0,0">
					<StackPanel Orientation="Horizontal">
						<Label Content="Make:" Foreground="White" />
						<Label Content="{Binding SelectedCar.VIN}" Foreground="White" />
					</StackPanel>
				</Border>

				<!-- Monthly lease cost -->
				<Border Margin="0,8,0,0">
					<StackPanel Orientation="Horizontal">
						<Label Content="Monthly lease costs:" Foreground="White" />
						<Label Content="{Binding SelectedCar.MonthlyLease}" Foreground="White" />
					</StackPanel>
				</Border>

				<!-- Lease cost -->
				<Border Margin="0,8,0,0">
					<StackPanel Orientation="Horizontal">
						<Label Content="Lease until"
						       HorizontalAlignment="Left"
						       VerticalAlignment="Top"
						       Foreground="White"/>
						<DatePicker SelectedDate="{Binding LeaseUntil}"
						            HorizontalAlignment="Right"
						            VerticalAlignment="Center"/>
					</StackPanel>
				</Border>
				
				<Button Command="{Binding OpenLeaseCarDialogCommand}"
				        BorderThickness="0"
				        Content="Lease"
				        Foreground="White"
				        FontSize="12"
				        FontWeight="Medium"
				        FontFamily="Montserrat"
				        Cursor="Hand"
				        Margin="0,30,0,0"
				        HorizontalAlignment="Left">
					<Button.Style>
						<Style TargetType="Button">
							<Setter Property="Background" Value="#509A10" />
							<Style.Triggers>
								<Trigger Property="IsMouseOver" Value="True">
									<Setter Property="Background" Value="#386C0B" />
								</Trigger>
							</Style.Triggers>
						</Style>
					</Button.Style>
					<Button.Template>
						<ControlTemplate TargetType="Button">
							<Border Width="100" Height="30"
							        CornerRadius="8"
							        Background="{TemplateBinding Background}">
								<ContentPresenter VerticalAlignment="Center"
								                  HorizontalAlignment="Center" />
							</Border>
						</ControlTemplate>
					</Button.Template>
				</Button>
			</StackPanel>
		</Border>

		<!-- Leasing overlay -->
		<!-- NOTE(piotr.klosowski): This should be separate view and navigation should be handled differently -->
		<Grid x:Name="LeasingOverlay" Visibility="{Binding IsLeaseCarDialogOpen}">
			<Grid Background="White" Opacity="0.5" />
			<Grid HorizontalAlignment="Center" VerticalAlignment="Center" Width="400" Height="200" Background="White"
			      Opacity="1">
				<StackPanel Orientation="Vertical">
					<TextBlock HorizontalAlignment="Center"
					           VerticalAlignment="Top"
					           Margin="0,20,0,0">
						Confirm leasing on the follwing terms?
					</TextBlock>
					<StackPanel Orientation="Vertical"
					            Margin="20,0,20,0">
						<Grid>
							<Label Content="Car"
							       HorizontalAlignment="Left"
							       Margin="0,0,0,0"
							       VerticalAlignment="Top"
							       Height="28"
							       Width="148"
							       Foreground="Black" />
							<Label x:Name="ConfirmationCarComboName"
							       Content="{Binding SelectedCar.Model}"
							       HorizontalAlignment="Right"
							       VerticalAlignment="Top"
							       Margin="0,0,0,0"
							       Height="28"
							       Width="120"
							       Foreground="Black" />
						</Grid>
						<Grid>
							<Label Content="Amount of months"
							       HorizontalAlignment="Left"
							       Margin="0,0,0,0"
							       VerticalAlignment="Top"
							       Height="28"
							       Width="148"
							       Foreground="Black" />
							<Label x:Name="ConfirmationMonthsAmount"
							       Content="{Binding LeasingConditions.Months}"
							       HorizontalAlignment="Right"
							       VerticalAlignment="Top"
							       Margin="0,0,0,0"
							       Height="28"
							       Width="120"
							       Foreground="Black" />
						</Grid>
						<Grid>
							<Label Content="Lease until"
							       HorizontalAlignment="Left"
							       Margin="0,0,0,0"
							       VerticalAlignment="Top"
							       Height="28"
							       Width="148"
							       Foreground="Black" />
							<Label x:Name="ConfirmationLeaseUntil"
							       Content="{Binding LeasingConditions.To}"
							       HorizontalAlignment="Right"
							       VerticalAlignment="Top"
							       Margin="0,0,0,0"
							       Height="28"
							       Width="120"
							       Foreground="Black" />
						</Grid>
						<Grid Margin="20,0,20,0">
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
								<Button Command="{Binding AcceptLeasingConditionCommand}"
								        BorderThickness="0"
								        Content="Confirm"
								        Foreground="White"
								        FontSize="12"
								        FontWeight="Medium"
								        FontFamily="Montserrat"
								        Cursor="Hand"
								        Margin="4,30,4,0"
								        HorizontalAlignment="Left">
									<Button.Style>
										<Style TargetType="Button">
											<Setter Property="Background" Value="#509A10" />
											<Style.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter Property="Background" Value="#386C0B" />
												</Trigger>
											</Style.Triggers>
										</Style>
									</Button.Style>
									<Button.Template>
										<ControlTemplate TargetType="Button">
											<Border Width="100" Height="30"
											        CornerRadius="8"
											        Background="{TemplateBinding Background}">
												<ContentPresenter VerticalAlignment="Center"
												                  HorizontalAlignment="Center" />
											</Border>
										</ControlTemplate>
									</Button.Template>
								</Button>

								<Button Command="{Binding CloseLeaseCarDialogCommand}"
								        BorderThickness="0"
								        Content="Cancel"
								        Foreground="White"
								        FontSize="12"
								        FontWeight="Medium"
								        FontFamily="Montserrat"
								        Cursor="Hand"
								        Margin="4,30,4,0"
								        HorizontalAlignment="Left">
									<Button.Style>
										<Style TargetType="Button">
											<Setter Property="Background" Value="#509A10" />
											<Style.Triggers>
												<Trigger Property="IsMouseOver" Value="True">
													<Setter Property="Background" Value="#386C0B" />
												</Trigger>
											</Style.Triggers>
										</Style>
									</Button.Style>
									<Button.Template>
										<ControlTemplate TargetType="Button">
											<Border Width="100" Height="30"
											        CornerRadius="8"
											        Background="{TemplateBinding Background}">
												<ContentPresenter VerticalAlignment="Center"
												                  HorizontalAlignment="Center" />
											</Border>
										</ControlTemplate>
									</Button.Template>
								</Button>
							</StackPanel>
						</Grid>
					</StackPanel>
				</StackPanel>
			</Grid>
		</Grid> <!-- Leasing overlay -->
	</StackPanel>
</Page>