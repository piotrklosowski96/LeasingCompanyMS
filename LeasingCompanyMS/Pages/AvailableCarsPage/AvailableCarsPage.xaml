<Page x:Class="LeasingCompanyMS.Pages.AvailableCarsPage.AvailableCarsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:browseCarsPage="clr-namespace:LeasingCompanyMS.Pages.BrowseCarsPage"
      xmlns:leasingTermsSummary="clr-namespace:LeasingCompanyMS.Pages.Components.LeasingTermsSummary"
      mc:Ignorable="d"
      d:DesignHeight="450" d:DesignWidth="800"
      Title="BrowseCarsPage"
      HorizontalAlignment="Stretch"
      VerticalAlignment="Stretch">

	<Page.DataContext>
		<browseCarsPage:AvailableCarsPageViewModel />
	</Page.DataContext>

	<Grid>
		<!-- Available car information -->
		<StackPanel>
			<DataGrid IsReadOnly="True"
			          AutoGenerateColumns="False"
			          ItemsSource="{Binding AvailableCars, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
			          SelectedItem="{Binding SelectedCar, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
				<DataGrid.Columns>
					<DataGridTextColumn Header="Make" Width="*" Binding="{Binding Mark}" />
					<DataGridTextColumn Header="Model" Width="*" Binding="{Binding Model}" />
					<DataGridTextColumn Header="Year of production" Width="*" Binding="{Binding Year}" />
					<DataGridTextColumn Header="Mileage" Width="*" />
					<DataGridTextColumn Header="Registration" Width="*" Binding="{Binding Registration}" />
					<DataGridTextColumn Header="VIN" Width="*" Binding="{Binding VIN}" />
					<DataGridTextColumn Header="MonthlyLease" Width="*" Binding="{Binding MonthlyLease}" />
				</DataGrid.Columns>
			</DataGrid>

			<Border Height="16"/>
			
			<Button Command="{Binding OpenLeaseCarDialogCommand}"
			        Style="{StaticResource controlButton}"
			        HorizontalAlignment="Left"
			        Content="Lease"
			        Foreground="White"
			        Padding="32 8 32 8" />

		</StackPanel>


		<!-- Leasing overlay -->
		<!-- NOTE(piotr.klosowski): This should be separate view and navigation should be handled differently -->
		<Grid Visibility="{Binding IsLeaseCarDialogOpen}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
			<Grid Background="Black" Opacity="0.5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
			<leasingTermsSummary:LeasingTermsSummary
				LeasingTerms="{Binding  LeasingTerms}"
				AcceptLeasingTermsCommand="{Binding AcceptLeasingConditionCommand}"
				RejectLeasingTermsCommand="{Binding CloseLeaseCarDialogCommand}"
				HorizontalAlignment="Center"
				VerticalAlignment="Center" />
		</Grid>
	</Grid>
</Page>